# 🚀 快速开始指南

## 第一步：安装依赖

### 方式 1: 使用 pip（推荐）
```bash
pip install -r requirements.txt
```

### 方式 2: 使用 conda
```bash
conda create -n v5control python=3.9
conda activate v5control
pip install -r requirements.txt
```

## 第二步：启动应用

### Windows 用户
双击 `run.bat` 文件

### 或使用命令行
```bash
streamlit run app.py
```

## 第三步：使用应用

### 1. 准备数据
**选项 A: 使用示例数据（推荐初次使用）**
- ✅ 勾选左侧边栏的"使用示例数据"
- 🎚️ 调整时长（1-48小时）
- 🔘 点击"生成示例数据"

**选项 B: 上传自己的数据**
- 📁 准备 CSV 或 Excel 文件
- 📋 确保包含 `time` 和 `load` 两列
- ⬆️ 点击上传按钮

### 2. 配置参数
在左侧边栏调整以下参数：

**基础参数**（推荐值）:
- Buffer (安全余量): 5 kW
- R↑ (上行斜率): 10 kW/s
- R↓ (下行斜率): 50 kW/s
- α (置信度): 1e-3
- P_max (最大功率): 100 kW

**高级参数**（可选）:
- 展开"🔧 高级参数"
- 根据需要调整延迟参数

### 3. 运行仿真
- 🎯 点击"▶️ 运行仿真"按钮
- ⏳ 等待仿真完成（显示进度条）
- ✅ 仿真完成后自动显示结果

### 4. 查看结果

**关键指标**（自动显示）:
- 📊 总弃光量 (kWh)
- ⚡ 最大弃光功率 (kW)
- 🛡️ 安全旁路触发次数
- 📈 平均/最大上调速率
- 📉 平均/最大下调速率

**可视化图表**:
1. **时间序列对比图**
   - 查看负载、PV指令、预测值对比
   - 可选显示 STUKF 预测和上界

2. **控制效果分析**
   - 原始负载 vs 净负载
   - 是否存在逆流（红色基线）

3. **弃光分析**
   - 弃光功率时间序列
   - 弃光功率分布直方图

4. **变化率统计**
   - 上调速率分布
   - 下调速率分布

### 5. 导出数据
- 📥 点击"下载仿真结果 (CSV)"
- 📥 点击"下载性能指标 (CSV)"

## 常见问题

### Q1: 安装依赖时出错？
**A**: 尝试升级 pip
```bash
pip install --upgrade pip
pip install -r requirements.txt
```

### Q2: Streamlit 无法启动？
**A**: 检查是否已安装 streamlit
```bash
pip list | grep streamlit
```

### Q3: 图表不显示？
**A**: 确保已安装 plotly
```bash
pip install plotly --upgrade
```

### Q4: 数据格式要求？
**A**:
- CSV 或 Excel 文件
- 必须包含 `time` 列（时间戳，单位：秒）
- 必须包含 `load` 列（负载功率，单位：kW）

示例数据格式：
```csv
time,load
0,45.2
1,46.1
2,44.8
...
```

### Q5: 如何调优参数？
**A**: 参考以下建议
- **Buffer**: 根据现场噪声和延迟确定，一般 5-10 kW
- **R↑**: 不超过负载典型下行速率的 80-90%
- **R↓**: 可设置较大值，如 50-100 kW/s
- **α**: 越小越保守，建议 1e-3 到 1e-4

## 下一步

- 📖 阅读完整的 `README.md` 了解算法原理
- 📊 尝试不同参数组合
- 💾 导出结果进行进一步分析
- 🔧 根据实际需求调整参数

## 技术支持

如遇问题，请检查：
1. Python 版本 (推荐 3.8+)
2. 依赖包是否全部安装
3. 数据格式是否正确
4. 参数设置是否合理

---

**祝使用愉快！** 🎉
